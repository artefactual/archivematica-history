{% extends "layout_fluid.html" %}

{% block title %}Archival storage{% endblock %}
{% block h1 %}Archival storage{% endblock %}
{% block page_id %}archival-storage{% endblock %}

{% block css %}
  <link href="{{ STATIC_URL }}css/archival_storage.css" rel="stylesheet" type="text/css" />
{% endblock %}

{% block js %}
  <script type="text/javascript">
    $(document).ready(function()
      {

      });
  </script>
{% endblock %}

{% block sidebar %}
  <h5>Archival storage</h5>
  <div class="preview-help-text">
    <p class="preview">Archivematica's archival storage tab is used to browse and retrieve Archival Information Packages (AIPs)... <a href="#">(read more)</a></p>
    <p class="content">Archivematica's archival storage tab is used to browse and retrieve Archival Information Packages (AIPs), which can be sorted by AIP name, size, UUID or date stored. The size column shows the compressed size of each AIP and total size at the bottom of the column. Click on an AIP link to download the zipped AIP. </p>
  </div>
{% endblock %}

{% block content %}

 <form method='POST'>
  {{ form }}
  <input type='submit' value='Search'/>
  </form>

  {% if results %}
    {% for item in results %}
      {{item.uuid}}<br/>
    {% endfor %}
  {% endif %}

  {% if sips %}
    <table>
      <thead>
        <th>
          <div>
            AIP
            <a class="up {% if order_by == 'name' and sort_by == 'up' %} selected_up{% endif %}" href="?order_by=name&sort_by=up">Sort</a>
            <a class="down {% if order_by == 'name' and sort_by == 'down' %} selected_down{% endif %}" href="?order_by=name&sort_by=down">Sort</a>
          </div>
        </th>
        <th>
          <div>
            Size
            <a class="up {% if order_by == 'size' and sort_by == 'up' %} selected_up"{% endif %}" href="?order_by=size&sort_by=up">Sort</a>
            <a class="down {% if order_by == 'size' and sort_by == 'down' %} selected_down"{% endif %}" href="?order_by=size&sort_by=down">Sort</a>
          </div>
        </th>
        <th>
          <div>
            UUID
            <a class="up {% if order_by == 'uuid' and sort_by == 'up' %} selected_up"{% endif %}" href="?order_by=uuid&sort_by=up">Sort</a>
            <a class="down {% if order_by == 'uuid' and sort_by == 'down' %} selected_down"{% endif %}" href="?order_by=uuid&sort_by=down">Sort</a>
          </div>
        </th>
        <th>
          <div>
            Date
            <a class="up {% if order_by == 'date' and sort_by == 'up' %} selected_up{% endif %}" href="?order_by=date&sort_by=up">Sort</a>
            <a class="down {% if order_by == 'date' and sort_by == 'down' %} selected_down"{% endif %}" href="?order_by=date&sort_by=down">Sort</a>
          </div>
        </th>
      </thead>
      <tbody>
        {% for item in sips %}
          <tr>
            <td class="link-sip"><a href="{% url main.views.archival_storage item.href %}">{{ item.name }}</a></td>
            <td class="size">{{ item.size }}</td>
            <td class="uuid">{{ item.uuid }}</td>
            <td>{{ item.date }}</td>
          </tr>
        {% endfor %}
      </tbody>
      <tfoot>
        <tr>
          <td>&nbsp;</td>
          <td colspan="3">
            <span>{{ total_size }}</span> MB
          </td>
        </tr>
      </tfoot>
    </table>

  {% else %}

    <div class="alert-message">
      <p>Archival storage is empty.</p>
    </div>

  {% endif %}

{% endblock %}
